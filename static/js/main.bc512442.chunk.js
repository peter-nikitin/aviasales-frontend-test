(this["webpackJsonpaviasales-test"]=this["webpackJsonpaviasales-test"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/Logo.0c089234.svg"},27:function(e,t,a){e.exports=a.p+"static/media/selected.68ca57dc.svg"},28:function(e,t,a){e.exports=a(60)},33:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),c=a.n(s),i=(a(33),a(1)),o=a(26),l=a.n(o),u=Object(i.a)({header:{padding:{top:66,bottom:50},textAlign:"center"}}),d=function(){var e=u();return r.a.createElement("header",{className:e.header},r.a.createElement("img",{src:l.a,alt:"Aviasalse - \u043f\u043e\u0438\u0441\u043a \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"}))},m=a(5),h=a(27),f=a.n(h),p=Object(i.a)({filtersList:{listStyle:"none",padding:0,margin:0},header:{fontStyle:"normal",fontWeight:600,fontSize:12,lineHeight:1.2,padding:{top:20,left:20,right:20,bottom:10},letterSpacing:.5,textTransform:"uppercase",color:"#4A4A4A"},filtersElement:{padding:{left:20,top:10,bottom:10},border:"none",background:"none",position:"relative",display:"flex",alignItems:"center",width:"100%",fontSize:13,"&:hover":{backgroundColor:"#F1FCFF",cursor:"pointer"},"&:before":{content:'""',border:"1px solid #9ABBCE",borderRadius:2,width:20,height:20,display:"block",margin:{right:10}}},checked:{"&:before":{backgroundImage:"url(".concat(f.a,")"),backgroundPosition:"center",border:"1px solid #2196F3",backgroundRepeat:"no-repeat"}},filtersBlock:{width:232,background:"#FFFFFF",boxShadow:" 0px 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:5,marginRight:20,position:"sticky"}}),b=function(e){var t=e.handleFilterChange,a=e.selectedFilters,n=e.filtersArray,s=p();return r.a.createElement("div",{className:s.filtersBlock},r.a.createElement("div",{className:s.header},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",{className:s.filtersList},n.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("button",{id:e.id,type:"button",className:"".concat(s.filtersElement," ").concat(a.filter((function(t){return t.id===e.id})).length>0&&s.checked),onClick:function(){t(e.id)}},e.label))}))))},g=Object(i.a)({buttons:{display:"flex",textTransform:"uppercase",marginBottom:20},tabButton:{background:"#FFFFFF",border:"1px solid #DFE5EC",width:"50%",padding:{top:15,bottom:15},textAlign:"center","&:first-child":{borderRadius:"5px 0 0 5px"},"&:last-child":{borderRadius:"0 5px 5px 0"},"&:focus":{outline:"none",background:"#2196F3",color:"#FFFFFF",border:"1px solid #2196F3",opacity:"0.5",cursor:"pointer"},"&:hover":{background:"#2196F3",color:"#FFFFFF",border:"1px solid #2196F3",opacity:"0.5",cursor:"pointer"}},selected:{background:"#2196F3",color:"#FFFFFF",border:"1px solid #2196F3"}}),v=function(e){var t=e.selectedTab,a=e.handleTabChange,n=g();return r.a.createElement("div",{className:n.buttons},r.a.createElement("button",{className:"".concat(n.tabButton," ").concat("cheapest"===t&&n.selected),onClick:function(){return a("cheapest")},type:"button"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),r.a.createElement("button",{className:"".concat(n.tabButton," ").concat("fastest"===t&&n.selected),onClick:function(){return a("fastest")},type:"button"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))},E=a(12),k=a.n(E),F=Object(i.a)({segmentLine:{display:"flex",marginBottom:10},third:{width:"33%"},header:{letterSpacing:.5,textTransform:"uppercase",color:"#A0B0B9",fontSize:12,fontWeight:600},value:{fontSize:14,fontWeight:600}}),x=function(e){var t=e.stops,a=e.duration,n=e.date,s=e.destination,c=e.origin,i=F();return r.a.createElement("div",{className:i.segmentLine},r.a.createElement("div",{className:i.third},r.a.createElement("div",{className:i.header},c," - ",s),r.a.createElement("div",{className:i.value},k()(n).format("hh:mm")," -"," ",k()(n).add(a,"m").format("hh:mm"))),r.a.createElement("div",{className:i.third},r.a.createElement("div",{className:i.header},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("div",{className:i.value},function(e){var t=k.a.duration(e,"minutes"),a=t.days(),n=t.hours(),r=t.minutes(),s=a>0?"".concat(a,"\u0434"):"";return"".concat(s," ").concat(n,"\u0447 ").concat(r,"\u043c")}(a))),r.a.createElement("div",{className:i.third},r.a.createElement("div",{className:i.header},function(e){switch(e){case 0:return"\u0411\u0435\u0437 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a";case 1:return"1 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a\u0430";case 2:return"2 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a\u0438";case 3:return"3 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a\u0438";case 4:return"4 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a\u0438";case 5:return"5 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a"}return""}(t.length)),r.a.createElement("div",{className:i.value},t.join(", "))))},y=Object(i.a)({ticket:{display:"flex",flexDirection:"column",padding:{top:20,bottom:20,right:50,left:20},background:"#FFFFFF",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:5,marginBottom:20},priceLine:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},price:{color:"#2196F3",fontSize:24,fontWeight:600}}),j=function(e){var t=e.price,a=e.carrier,n=e.segments,s=y(),c="//pics.avs.io/99/36/".concat(a,".png");return r.a.createElement("div",{className:s.ticket},r.a.createElement("div",{className:s.priceLine},r.a.createElement("div",{className:s.price},t.toLocaleString("ru-RU")," \u0420"),r.a.createElement("img",{src:c,alt:a})),n.map((function(e){return r.a.createElement("div",{key:"".concat(e.destination,"_").concat(e.origin)},r.a.createElement(x,{date:e.date,duration:e.duration,destination:e.destination,origin:e.origin,stops:e.stops}))})))},w=function(e){var t=e.ticketsArray;return console.log(t.length),r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(j,{price:e.price,carrier:e.carrier,segments:e.segments,id:e.id}))})))},N=Object(i.a)({modal:{width:"40px",height:"40px",position:"fixed",animation:"$sk-chase 2.5s infinite linear both"},"sk-chase-dot":{width:"100%",height:"100%",position:"absolute",left:0,top:0,animation:"$sk-chase-dot 2.0s infinite ease-in-out both","&:before":{content:'""',display:"block",width:"25%",height:"25%",backgroundColor:"#2196F3",borderRadius:"100%",animation:"$sk-chase-dot-before 2.0s infinite ease-in-out both"},"&:nth-child(1)":{animationDelay:"-1.1s"},"&:nth-child(2)":{animationDelay:"-1.0s"},"&:nth-child(3)":{animationDelay:"-0.9s"},"&:nth-child(4)":{animationDelay:"-0.8s"},"&:nth-child(5)":{animationDelay:"-0.7s"},"&:nth-child(6)":{animationDelay:"-0.6s"},"&:nth-child(1):before":{animationDelay:"-1.1s"},"&:nth-child(2):before":{animationDelay:"-1.0s"},"&:nth-child(3):before":{animationDelay:"-0.9s"},"&:nth-child(4):before":{animationDelay:"-0.8s"},"&:nth-child(5):before":{animationDelay:"-0.7s"},"&:nth-child(6):before":{animationDelay:"-0.6s"}},"@keyframes sk-chase":{"100%":{transform:"rotate(360deg)"}},"@keyframes sk-chase-dot":{"80%, 100%":{transform:"rotate(360deg)"}},"@keyframes sk-chase-dot-before":{"50%":{transform:"scale(0.4)"},"100%, 0%":{transform:"scale(1.0)"}}}),O=function(){var e=N();return r.a.createElement("div",{className:e.modal},r.a.createElement("div",{className:e["sk-chase-dot"]}),r.a.createElement("div",{className:e["sk-chase-dot"]}),r.a.createElement("div",{className:e["sk-chase-dot"]}),r.a.createElement("div",{className:e["sk-chase-dot"]}),r.a.createElement("div",{className:e["sk-chase-dot"]}),r.a.createElement("div",{className:e["sk-chase-dot"]}))},C=Object(i.a)({tickets:{display:"flex",justifyContent:"center",alignItems:"flex-start"},ticketsList:{width:502}}),S=function(e){var t=e.tickets,a=e.handleFilterChange,n=e.selectedFilters,s=e.allFilters,c=e.sorting,i=e.setSorting,o=e.isLoading,l=C();return r.a.createElement("div",{className:l.tickets},o?r.a.createElement(O,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{handleFilterChange:a,selectedFilters:n,filtersArray:s}),r.a.createElement("div",{className:l.ticketsList},r.a.createElement(v,{selectedTab:c,handleTabChange:i}),r.a.createElement(w,{ticketsArray:t}))))},B=a(14),A=function(e){return e.map((function(e,t){return Object(B.a)(Object(B.a)({},e),{},{id:t+1})}))},D=function(e){var t=new Set,a=[{label:"\u0412\u0441\u0435",id:"all",stopsCount:-1}];return e.forEach((function(e){e.segments.forEach((function(e){return t.add(e.stops.length)}))})),t.forEach((function(e){switch(e){case 0:a.push({label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",id:"none",stopsCount:0});break;case 1:a.push({label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",id:"1_stop",stopsCount:1});break;case 2:a.push({label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:"2_stops",stopsCount:2});break;case 3:a.push({label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:"3_stops",stopsCount:3});break;case 4:a.push({label:"4 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:"4_stops",stopsCount:4});break;case 5:a.push({label:"5 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",id:"5_stops",stopsCount:5})}})),a.sort((function(e,t){return e.stopsCount-t.stopsCount}))},L=function(e,t){var a=[];return"all"===t[0].id?a=e:t.forEach((function(t){e.filter((function(e){return(e.segments[0].stops.length>e.segments[1].stops.length?e.segments[0].stops.length:e.segments[1].stops.length)===t.stopsCount})).forEach((function(e){return a.push(e)}))})),a},R=a(8),I=function(e,t){switch(t){case"cheapest":return e.sort((function(e,t){return e.price-t.price}));case"fastest":return e.sort((function(e,t){return e.segments[0].duration-t.segments[0].duration}));default:return e}},T=function(e,t){return r.a.useMemo((function(){var a=Object(R.a)(e);return I(a,t)}),[e,t])},W=function(e,t,a,n){if(t.filter((function(t){return t.id===e})).length>0){var r=t;t.length>1&&(r=t.filter((function(t){return t.id!==e}))),a(r)}else{var s=[];"all"!==e&&(s=t.filter((function(e){return"all"!==e.id}))),a([].concat(Object(R.a)(n.filter((function(t){return t.id===e}))),Object(R.a)(s)))}},_=a(4),z=a.n(_),$=a(6),J=a(11),M=a.n(J),H=function(){var e=Object($.a)(z.a.mark((function e(t){var a,n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r="https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t),e.prev=2,e.next=5,M.a.get(r);case 5:return 200===(a=e.sent).status&&a.data.tickets.forEach((function(e){return n.push(e)})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),e.t0.status>500&&H(t),e.abrupt("return",new Error(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),P=H,U=function(){var e=Object($.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("https://front-test.beta.aviasales.ru/search");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new Error(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object($.a)(z.a.mark((function e(t,a){var n,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:if(!((n=e.sent)instanceof Error)){e.next=8;break}throw n;case 8:return e.next=10,P(n.data.searchId);case 10:if(!((r=e.sent)instanceof Error)){e.next=15;break}throw r;case 15:t(a(r));case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)([]),i=Object(m.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),h=d[0],f=d[1],p=Object(n.useState)("cheapest"),b=Object(m.a)(p,2),g=b[0],v=b[1],E=Object(n.useState)(o),k=Object(m.a)(E,2),F=k[0],x=k[1],y=Object(n.useState)([{label:"\u0412\u0441\u0435",id:"all",stopsCount:-1}]),j=Object(m.a)(y,2),w=j[0],N=j[1];Object(n.useEffect)((function(){q(l,A).then((function(){return f(!1)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){s(D(o))}),[o]),Object(n.useEffect)((function(){x(L(o,w))}),[o,w]);var O=T(F,g);return r.a.createElement(S,{tickets:O,handleFilterChange:function(e){return W(e,w,N,a)},allFilters:a,selectedFilters:w,sorting:g,setSorting:v,isLoading:h})},K=Object(i.a)({App:{}}),Q=function(){var e=K();return r.a.createElement("div",{className:e.App},r.a.createElement(d,null),r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.bc512442.chunk.js.map